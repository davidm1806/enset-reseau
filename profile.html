<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>INSPINIA | Profile</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body>

    <div id="wrapper">

        <custom-nav></custom-nav>

        <div id="page-wrapper" class="gray-bg">
            <custom-top-menu></custom-top-menu>

            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>Profile</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="contact.html">Relations</a>
                        </li>
                        <li class="active">
                            <strong> {{ account?.first_name }} {{ account?.last_name }}</strong>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">

                </div>
            </div>
        <div class="wrapper wrapper-content">
            <div class="row animated fadeInRight">
                <div class="col-md-4">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Profil</h5>
                        </div>
                        <div>
                            <div class="ibox-content no-padding border-left-right">
                                <img alt="image" class="img-responsive" src="img/inconnue/inconnu-small.jpg">
                            </div>
                            <div class="ibox-content profile-content">
                                <h4><strong>{{ account?.first_name }} {{ account?.last_name }} : {{ account?.matricule?.toLocaleUpperCase()}}</strong></h4>

                                <p><i class="fa fa-map-marker"></i> {{ account?.address }} </p>
                                <address>
                                    <strong>ENSET {{ account?.filiere?.departement?.name }} {{ account?.filiere?.name }} </strong><br>
                                    Entrée : {{ account?.dateEntree }}<br>
                                    Sortie : {{ account?.dateDiplomation }}<br>
                                    <abbr title="Phone">P:</abbr> {{account?.phone}}
                                    <abbr title="Email">E:</abbr> {{account?.email}}

                                    <div class="border-top m-t-md">

                                    </div>

                                </address>
                                <div class="row m-t-lg">
                                    <div class="col-md-4">
                                        <h5><strong> {{ account?.postNumber ? account?.postNumber : 0 }}</strong> Posts</h5>
                                    </div>
                                    <div class="col-md-4">
                                        <h5><strong> {{ account?.frendNumber ? account?.frendNumber : 0 }} </strong> Following</h5>
                                    </div>
                                    <div class="col-md-4">
                                        <h5><strong> {{ account?.groupNumber ? account?.groupNumber : 0  }}</strong> Groups</h5>
                                    </div>
                                </div>
                                <div class="user-button">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <a class="btn btn-primary btn-sm btn-block"><i class="fa fa-envelope"></i> Email</a>
                                        </div>
                                        <div class="col-md-4">
                                            <a class="btn btn-primary btn-sm btn-block"><i class="fa fa-user-plus"></i> Follow</a>
                                        </div>
                                        <div class="col-md-4">
                                            <a class="btn btn-primary btn-sm btn-block" @click="updateAccount(ac)"><i class="fa fa-edit"></i> Modifier</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
                    </div>
                <div class="col-md-8">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Annoces</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                    <i class="fa fa-wrench"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-user">
                                    <li><a href="#">Config option 1</a>
                                    </li>
                                    <li><a href="#">Config option 2</a>
                                    </li>
                                </ul>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">

                            <div>
                                <div class="feed-activity-list">

                                    <div v-if="account?.annonces?.length==0">
                                        <h1 class="text-primary">Aucune annonce trouvée</h1>
                                    </div>

                                    <div class="feed-element" v-else>
                                        <a href="#" class="pull-left">
                                            <img alt="image" class="img-circle" src="img/a3.jpg">
                                        </a>
                                        <div class="media-body ">
                                            <small class="pull-right">2h ago</small>
                                            <strong>Janet Rosowski</strong> add 1 photo on <strong>Monica Smith</strong>. <br>
                                            <small class="text-muted">2 days ago at 8:30am</small>
                                            <div class="photos">
                                                <a target="_blank" href="http://24.media.tumblr.com/20a9c501846f50c1271210639987000f/tumblr_n4vje69pJm1st5lhmo1_1280.jpg"> <img alt="image" class="feed-photo" src="img/p1.jpg"></a>
                                                <a target="_blank" href="http://37.media.tumblr.com/9afe602b3e624aff6681b0b51f5a062b/tumblr_n4ef69szs71st5lhmo1_1280.jpg"> <img alt="image" class="feed-photo" src="img/p3.jpg"></a>
                                                </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="text-center">

                                    <button class="btn btn-primary m"><i class="fa fa-plus-circle"></i> Ajouter annonce</button>
                                </div>

                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>

            <custom-footer/>

        </div>
        </div>



    <!-- Mainly scripts -->
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="js/inspinia.js"></script>
    <script src="js/plugins/pace/pace.min.js"></script>

    <!-- Peity -->
    <script src="js/plugins/peity/jquery.peity.min.js"></script>

    <!-- Peity -->
    <script src="js/demo/peity-demo.js"></script>

    <script src="js/vue.js"></script>
    <script src="component.js"></script>
    <script src="js/config.js"></script>


    <script>

        var app = new Vue({
            el: '#wrapper',
            beforeCreate: function() {
                const token = isAuthenticate();
                console.log(token);
                if (!token)
                    location.href = '/index.html';
            },
            created: function() {
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                const id = urlParams.get('id');
                this.findContact(id);
            },
            mounted: function() {

            },
            data: {
                account : {
                    id: null,
                    first_name: null,
                    last_name: null,
                    email: null,
                    phone: null,
                    address: null,
                    status: null,
                    isActive: null,
                    dateEntree: null,
                    dateDiplomation: null,
                    showPrivateProfile: null,
                    photoProfile: null,
                    hasPhotoProfile: null,
                    promotion: null,
                    showPrivateInfo: false,
                    filiereId: null,
                    sexe: null,
                    annonces:{}
                },

                groups: [],


            },
            methods: {
                findGroupPromotion: function () {
                    const selft = this;
                    $.ajax({
                        url: `${GROUP_FIND_ALL}`,
                        type: 'GET',
                        success: function (data) {
                            selft.groups = data;
                        },
                        error: function (data) {
                            console.log(data);
                        }
                    });
                },


                findContact: function (id) {
                    const selft = this;
                    $.ajax({
                        url: `${ACCOUNT_FIND_BY_ID+id}`,
                        type: 'GET',
                        success: function (data) {
                            selft.account = data;
                        },
                        error: function (data) {
                            console.log(data);
                        }
                    });
                },
            }
        })

    </script>

</body>

</html>
